const pg = require('pg');
const connectionString = process.env.DATABASE_URL || 'postgres://localhost:5432/coleelam';

const client = new pg.Client(connectionString);
const pool = new pg.Pool();
var q = pool.connect(function(err, client, done) {
  if (err) {
    console.log('cannot establish connection ' + err);
  }
  client.query(
    'CREATE TABLE users (id int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, username text NOT NULL CHECK (username <> \'\'), email text NOT NULL CHECK (email <> \'\'), pass_hash text NOT NULL)');
  done();
});
// q.then(function () {
//   pool.end();
// }).catch(err => {});
// client.end();
